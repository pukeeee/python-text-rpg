# Текстова RPG у стилі Path of Exile

Це репозиторій для розробки текстової рольової гри на Python, натхненної глибокими ігровими механіками Path of Exile. Проект фокусується на створенні масштабованої основи, яка дозволить легко додавати новий контент: предмети, ворогів, навички та ігрові події.

## 🚀 Про проект

Гра є текстовою RPG, де гравець досліджує світ, бореться з ворогами, збирає екіпірування та прокачує свого персонажа. В основі лежить гнучка система розрахунку характеристик та бойова система, що враховує безліч параметрів.

### Ключові особливості
- **Чиста архітектура**: Проект побудований на принципах Clean Architecture, що забезпечує повне розділення бізнес-логіки (ядра гри) від інфраструктурних деталей (бази даних, інтерфейсу). Це робить код гнучким, тестованим та легким для розширення.
- **Зберігання даних в PostgreSQL**: Динамічні дані гри (персонажі, їхній прогрес, інвентар) зберігаються в базі даних PostgreSQL, що забезпечує надійність та швидкість.
- **Конфігурація через JSON**: Статичні ігрові дані — базові предмети, типи ворогів, локації — зберігаються у зовнішніх JSON-файлах. Це дозволяє змінювати та додавати контент без втручання в код.
- **Глибока система характеристик**: Розрахунок параметрів персонажа (здоров'я, броня, ухилення, урон, критичні удари) базується на формулах, натхненних Path of Exile.
- **Готовність до Docker**: Проект налаштований для запуску в Docker-контейнерах, що спрощує розгортання та розробку.

## 🏛️ Архітектура

Проект використовує 4-шарову модель Чистої архітектури для максимальної гнучкості та підтримки.

```
┌─────────────────────────────────────────────────────────┐
│                  Presentation Layer                      │
│  (CLI / Telegram Bot / REST API)                        │
└────────────────────┬────────────────────────────────────┘
                     │
┌────────────────────▼────────────────────────────────────┐
│              Application Layer (Use Cases)               │
│  (Сценарії використання: створити персонажа, атакувати)  │
└────────────────────┬────────────────────────────────────┘
                     │
┌────────────────────▼────────────────────────────────────┐
│                  Domain Layer                            │
│  (Ядро гри: сутності, бізнес-правила, логіка)            │
└────────────────────┬────────────────────────────────────┘
                     │
┌────────────────────▼────────────────────────────────────┐
│              Infrastructure Layer                        │
│  (Робота з PostgreSQL, завантаження конфігурацій)        │
└─────────────────────────────────────────────────────────┘
```
- **Domain Layer**: Не залежить ні від чого. Тут живе вся основна логіка гри.
- **Application Layer**: Координує Domain та залежить тільки від нього.
- **Infrastructure & Presentation Layers**: Зовнішні шари, які залежать від внутрішніх, але їх реалізація може бути легко замінена.

## 🛠 Технологічний стек
- **Мова**: Python 3.12
- **База даних**: PostgreSQL
- **Взаємодія з БД**: SQLAlchemy, Alembic
- **Формат конфігурацій**: JSON
- **Контейнеризація**: Docker, Docker Compose

## 🚀 Як запустити

### 1. Запуск через Docker (рекомендовано)

Цей спосіб запустить гру та базу даних в ізольованих контейнерах.
**Зберіть та запустіть контейнери:**
    ```bash
    docker-compose up --build
    ```

    *Додайте `-d` в кінці, щоб запустити в фоновому режимі.*

### 2. Локальний запуск

1.  **Встановіть та запустіть PostgreSQL.**

2.  **Створіть базу даних** та користувача для гри.

3.  **Налаштуйте змінні середовища**:
    Створіть файл `.env` та вкажіть `DATABASE_URL`:
    ```
    DATABASE_URL=postgresql://user:password@localhost:5432/rpg_game
    ```

4.  **Встановіть залежності:**
    ```bash
    pip install -r requirements.txt
    ```

5.  **Застосуйте міграції бази даних:**
    ```bash
    alembic upgrade head
    ```

6.  **Запустіть гру:**
    ```bash
    python main.py
    ```

## ✅ План розробки MVP (Minimum Viable Product)

Це чекліст основних завдань, які необхідно виконати для запуску першої ігрової версії.

### Етап 1: Налаштування бази даних
- [ ] Налаштувати підключення до PostgreSQL.
- [ ] Створити початкову міграцію Alembic для таблиці персонажів.

### Етап 2: Налаштування проекту
- [x] Створити структуру папок (`domain`, `application` і т.д.)
- [x] Ініціалізувати папки як Python-пакети (файли `__init__.py`)
- [x] Створити `README.md` для GitHub
- [x] Налаштувати `requirements.txt`
- [ ] Налаштувати `pyproject.toml`

### Етап 3: Ядро домену (Domain Layer)
- [ ] Створити Value Objects (`stats.py`, `damage_range.py`)
- [ ] Створити базові Entities (`character.py`, `item.py`, `enemy.py`)
- [ ] Створити інтерфейси репозиторіїв (`character_repository.py` та інші)
- [ ] Реалізувати базовий Domain Service (`stats_calculator.py`)

### Етап 4: Інфраструктура (Infrastructure Layer)
- [ ] Реалізувати JSON-репозиторій для персонажів (`json_character_repository.py`)
- [ ] Реалізувати репозиторії для завантаження предметів та ворогів з JSON.

### Етап 5: Логіка програми (Application Layer)
- [ ] Створити DTO для передачі даних між шарами.
- [ ] Реалізувати Use Case: `create_character_use_case.py`.
- [ ] Реалізувати Use Case: `get_character_stats_use_case.py`.
- [ ] Реалізувати Use Case: `generate_event_use_case.py` (для дослідження).
- [ ] Реалізувати Use Case: `perform_attack_use_case.py` (для бою).

### Етап 6: Ігровий контент
- [ ] Створити JSON-файли для 1-2 типів зброї в `data/items/weapons/`.
- [ ] Створити JSON-файл для зілля здоров'я в `data/items/consumables/`.
- [ ] Створити JSON-файли для 1-2 типів ворогів в `data/enemies/`.
- [ ] Створити базовий конфігураційний файл `config/game_config.json`.

### Етап 7: Інтерфейс (Presentation Layer)
- [ ] Створити базовий CLI (`main.py`) для взаємодії з грою.
- [ ] Реалізувати в CLI команди: `new`, `stats`, `explore`, `attack`.
